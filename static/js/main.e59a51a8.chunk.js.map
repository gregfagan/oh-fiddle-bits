{"version":3,"sources":["registerServiceWorker.js","theme.js","components/Flex.js","components/Navigator.js","components/ControlledDisplay.js","audio/util.js","audio/micAnalyser.js","components/FrequencySlider.js","components/IconButton.js","icon/mic.svg","components/MicButton.js","components/Tuner.js","components/ToneButton.js","components/ToneGenerator.js","audio/toneGenerator.js","App.js","index.js"],"names":["isLocalhost","Boolean","window","location","hostname","match","registerValidSW","swUrl","navigator","serviceWorker","register","then","registration","onupdatefound","installingWorker","installing","onstatechange","state","controller","console","log","catch","error","shades","accent","darkAccent","lightest","light","base","dark","darkest","src_theme","info","primary","secondary","background","text","color","family","display","interface","import","active","inactive","foreground","disabled","Flex","styled_components_browser_esm","div","_templateObject","makeURI","name","encodeURI","replace","Container","Object","Navigator_templateObject","Nav","_templateObject2","props","theme","View","_templateObject3","selectedOption","_templateObject4","unselectedOption","_templateObject5","disabledOption","_templateObject6","Option","a","attrs","rel","href","_ref","children","undefined","_templateObject7","selected","Navigator_Navigator","_this","this","onhashchange","forceUpdate","selectedView","options","selectedURI","hash","renderedOptions","map","_ref2","i","view","react_default","createElement","key","renderedView","as","react","ControlledDisplay_Container","ControlledDisplay_templateObject","Display","figure","ControlledDisplay_templateObject2","Shadow","ControlledDisplay_templateObject3","Controls","ControlledDisplay_templateObject4","ControlledDisplay","controls","AudioContext","webkitAudioContext","log2","Math","notes","chromatic","names","_i","length","push","centerNote","indexOf","centerFrequency","deltaCents","f1","f2","floor","addCents","f","cents","pow","findFundamentalFrequency","buffer","sampleRate","bestK","bestR","k","sum","r","_callee","audioContext","analyser","stream","regenerator_default","wrap","_context","prev","next","createAnalyser","fftSize","Uint8Array","suspend","mediaDevices","getUserMedia","audio","sent","createMediaStreamSource","connect","abrupt","start","resume","stop","destroy","close","samplePitch","getByteTimeDomainData","snapDuration","Canvas","canvas","touch-action","FrequencySlider_templateObject","FrequencySlider_FrequencySlider","canvasEl","snapRefId","panning","panStart","startFrequency","snapStart","snapToFrequency","setCanvasRef","element","measureRef","startPanning","e","frequency","snapRafId","cancelAnimationFrame","setState","nativeEvent","clientX","pan","_this$state","_this$props","onFrequencyChange","pixelsPerCent","stopPanning","prevState","centsFromCenter","semitonesFromCenter","snapToNote","round","performance","now","snap","_this$state2","t","min","src","requestAnimationFrame","renderGraphics","ref","onPointerDown","onPointerUp","onPointerCancel","onPointerOut","onPointerMove","contentRect","bounds","_deviceScaledBounds","width","deviceScaled","right","left","height","bottom","top","ctx","getContext","fillStyle","fillRect","renderScale","renderNeedle","renderFrequency","_this$props2","cssPixelsPerCent","centsOnScale","centsFromCenterOfScale","semitoneNearestCenter","centsFromCenterOfScreen","numberOfTicksOnEachSide","ceil","shouldDrawMinorTicks","center","y1","y2","strokeStyle","lineWidth","x","strokeVertical","abs","fontSize","lerp","y","renderNoteLabel","j","size","note","sharp","octave","_toConsumableArray","sharpFont","nameSize","sharpSize","octaveSize","nameFont","fontOfSize","octaveFont","displayFontOfSize","font","measureText","sharpWidth","nameX","sharpX","octaveX","fillText","_this$props3","_this$props3$frequenc","marginTop","frequencyFont","hzFont","textAlign","hzWidth","toFixed","concat","defaultProps","components_FrequencySlider","react_measure","max","devicePixelRatio","beginPath","moveTo","lineTo","closePath","stroke","Graphic","svg","IconButton_templateObject","onClick","on","IconButton","rest","_objectWithoutProperties","assign","viewBox","role","cx","cy","strokeWidth","fill","_extends","target","arguments","source","prototype","hasOwnProperty","call","apply","mic_ref","d","mic_ref2","__webpack_require__","p","FilledMicIcon","fillRule","clipRule","strokeLinejoin","strokeMiterlimit","MicButton_templateObject","MicButton","Error","Tuner_templateObject","Tuner_Tuner","rafId","tuning","toggleTuner","sample","_assertThisInitialize","Tuner_assertThisInitialized","prevProps","_this2","startTuner","stopTuner","_create","micAnalyser_create","ToneButton_WaveForm","lastToggle","Infinity","animate","amplitude","sinPath","strokeLinecap","ToneButton","ToneButton_objectWithoutProperties","ToneGenerator_ToneGenerator","generator","playing","toggleTone","setFrequency","oscillator","createOscillator","destination","value","GlobalStyle","App_templateObject","Header","header","App_templateObject2","Title","h1","App_templateObject3","react_dom_default","render","_ref$extraOptions","extraOptions","Fragment","document","getElementById","URL","origin","addEventListener","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.e59a51a8.chunk.js","sourcesContent":["// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","const shades = {\r\n  accent: '#66AEBD',\r\n  darkAccent: '#255959',\r\n  lightest: '#F2EADF',\r\n  light: '#BFA288',\r\n  base: '#A68365',\r\n  dark: '#614433',\r\n  darkest: '#422F23',\r\n}\r\n\r\nexport default {\r\n  shades,\r\n  info: {\r\n    primary: shades.darkest,\r\n    secondary: shades.base,\r\n    background: shades.lightest,\r\n  },\r\n  text: {\r\n    color: shades.darkest,\r\n    family: {\r\n      display: 'Patua One, sans-serif',\r\n      interface: `-apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen,\r\n      Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif`,\r\n      import: `\r\n        @import url('https://fonts.googleapis.com/css?family=Patua+One');\r\n      `,\r\n    },\r\n  },\r\n  active: shades.lightest,\r\n  inactive: shades.light,\r\n  foreground: shades.base,\r\n  background: shades.dark,\r\n  disabled: shades.darkest,\r\n}\r\n","import styled from 'styled-components'\r\n\r\n// A flexbox configured with the most commonly used flex\r\n// properties in the app.\r\nexport default styled.div`\r\n  display: flex;\r\n\r\n  /* Grow down */\r\n  flex-flow: column;\r\n\r\n  /* Grow and shrink without a basis */\r\n  flex: 1 1 0;\r\n\r\n  /* Prevent child elements from pushing out the size of this one */\r\n  overflow: hidden;\r\n`\r\n","import React, { Component } from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport Flex from './Flex'\r\n\r\nfunction makeURI(name) {\r\n  return encodeURI('#' + name.replace(' ', '-'))\r\n}\r\n\r\nconst Container = styled(Flex)`\r\n  flex-flow: row;\r\n  @media (orientation: portrait) {\r\n    flex-flow: column-reverse;\r\n  }\r\n`\r\n\r\nconst Nav = styled(Flex)`\r\n  background: ${props => props.theme.background};\r\n  flex: 0 0 auto;\r\n\r\n  @media (orientation: landscape) {\r\n    flex-flow: column;\r\n    box-shadow: inset -8px 0 8px -5px rgba(0, 0, 0, 0.2);\r\n  }\r\n\r\n  @media (orientation: portrait) {\r\n    flex-flow: row;\r\n    box-shadow: inset 0 8px 8px -5px rgba(0, 0, 0, 0.2);\r\n  }\r\n`\r\n\r\nconst View = styled(Flex)`\r\n  background: ${props => props.theme.foreground};\r\n  @media (orientation: landscape) {\r\n    padding: 0em 1.5em;\r\n  }\r\n`\r\n\r\nconst selectedAccentSize = '7px'\r\nconst selectedOption = css`\r\n  color: ${props => props.theme.active};\r\n  background: ${props => props.theme.foreground};\r\n\r\n  @media (orientation: portrait) {\r\n    border-top: 0px solid transparent;\r\n    border-bottom: ${selectedAccentSize} solid\r\n      ${props => props.theme.shades.accent};\r\n  }\r\n\r\n  @media (orientation: landscape) {\r\n    border-right: 0px solid transparent;\r\n    border-left: ${selectedAccentSize} solid\r\n      ${props => props.theme.shades.accent};\r\n  }\r\n`\r\n\r\nconst unselectedOption = css`\r\n  @media (orientation: portrait) {\r\n    border-top: ${selectedAccentSize} solid transparent;\r\n    border-bottom: 0px;\r\n  }\r\n\r\n  @media (orientation: landscape) {\r\n    border-right: ${selectedAccentSize} solid transparent;\r\n    border-left: 0px;\r\n  }\r\n`\r\n\r\nconst disabledOption = css`\r\n  cursor: default;\r\n  color: ${props => props.theme.disabled};\r\n`\r\n\r\nconst Option = styled.a.attrs({\r\n  rel: 'internal',\r\n  href: ({ disabled, children: name }) =>\r\n    !disabled ? makeURI(name) : undefined,\r\n})`\r\n  display: block;\r\n  outline: none;\r\n  padding: 1em 3.25em;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  text-transform: uppercase;\r\n  font-weight: 500;\r\n  cursor: pointer;\r\n  color: ${props => props.theme.inactive};\r\n  transition: border 0.15s;\r\n  ${props => (props.selected ? selectedOption : unselectedOption)};\r\n  ${props => props.disabled && disabledOption};\r\n\r\n  @media (orientation: portrait) {\r\n    flex-grow: 1;\r\n    padding: 1em;\r\n  }\r\n`\r\n\r\nexport default class Navigator extends Component {\r\n  // This component routes based on the location hash. The\r\n  // current value is read during render, so we don't need\r\n  // to set any state; just force an update when it changes.\r\n  componentDidMount() {\r\n    window.onhashchange = () => this.forceUpdate()\r\n  }\r\n\r\n  render() {\r\n    const { children: options } = this.props\r\n    const selectedURI = window.location.hash\r\n\r\n    // While rendering the Options, keep a reference\r\n    // to the selected view to be rendered below.\r\n    let selectedView\r\n    const renderedOptions = options.map(({ name, view }, i) => {\r\n      // If there is no selectedURI, default to the first option\r\n      const selected = selectedURI ? selectedURI === makeURI(name) : i === 0\r\n\r\n      if (selected) selectedView = view\r\n\r\n      return (\r\n        <Option key={name} selected={selected} disabled={!view}>\r\n          {name}\r\n        </Option>\r\n      )\r\n    })\r\n\r\n    const renderedView = selectedView && React.createElement(selectedView)\r\n\r\n    return (\r\n      <Container>\r\n        <Nav as=\"nav\">{renderedOptions}</Nav>\r\n        <View as=\"main\">{renderedView}</View>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport Flex from './Flex'\r\n\r\nconst Container = styled(Flex)`\r\n  display: grid;\r\n  grid-template-rows: 50% 50%;\r\n`\r\n\r\nconst Display = styled.figure`\r\n  position: relative;\r\n  background: ${props => props.theme.info.background};\r\n`\r\n\r\nconst Shadow = styled.div`\r\n  pointer-events: none;\r\n  position: absolute;\r\n  top: 0;\r\n  left: 0;\r\n  right: 0;\r\n  bottom: 0;\r\n\r\n  @media (orientation: portrait) {\r\n    box-shadow: inset 0 -5px 18px -4px rgba(0, 0, 0, 0.3),\r\n      inset 0 5px 18px -4px rgba(0, 0, 0, 0.3);\r\n  }\r\n\r\n  @media (orientation: landscape) {\r\n    box-shadow: inset 0 0 18px 3px rgba(0, 0, 0, 0.3);\r\n  }\r\n`\r\n\r\nconst Controls = styled(Flex)`\r\n  align-items: center;\r\n  padding: 5vh;\r\n`\r\n\r\nexport default ({ display, controls }) => (\r\n  <Container>\r\n    <Display>\r\n      <Shadow />\r\n      {display}\r\n    </Display>\r\n    <Controls>{controls}</Controls>\r\n  </Container>\r\n)\r\n","export const AudioContext = window.AudioContext || window.webkitAudioContext\r\n\r\nconst log2 = Math.log(2)\r\n\r\n// An array note names based on commonly used\r\n// https://en.wikipedia.org/wiki/Scientific_pitch_notation\r\nexport const notes = (() => {\r\n  const chromatic = [\r\n    'C',\r\n    'C♯',\r\n    'D',\r\n    'D♯',\r\n    'E',\r\n    'F',\r\n    'F♯',\r\n    'G',\r\n    'G♯',\r\n    'A',\r\n    'A♯',\r\n    'B',\r\n  ]\r\n  const names = []\r\n  for (let i = 0; i <= 8; i++) {\r\n    for (let name of chromatic) {\r\n      names.push(name + i)\r\n    }\r\n  }\r\n\r\n  return names\r\n})()\r\n\r\nexport const centerNote = notes.indexOf('A4')\r\nexport const centerFrequency = 440\r\n\r\nexport function nearestNote(f) {\r\n  const centsFromCenter = deltaCents(f, centerFrequency)\r\n  const semitonesFromCenter = Math.round(centsFromCenter / 100)\r\n  const note = centerNote + semitonesFromCenter\r\n  return note\r\n}\r\n\r\nexport function frequencyOfNote(note) {\r\n  const semitonesFromCenter = note - centerNote\r\n  const centsFromCenter = semitonesFromCenter * 100\r\n  return addCents(centerFrequency, centsFromCenter)\r\n}\r\n\r\n// Returns the difference between frequencies f1 and f2 in cents\r\n// https://en.wikipedia.org/wiki/Cent_(music)\r\nexport function deltaCents(f1, f2) {\r\n  return Math.floor(1200 * (Math.log(f1 / f2) / log2))\r\n}\r\n\r\n// Returns the frequency f shifted by the given number of cents\r\nexport function addCents(f, cents) {\r\n  return f * Math.pow(2, cents / 1200)\r\n}\r\n\r\n// Adapted from https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/webaudiotuner/\r\n// Use autocorrelation to find fundamental frequency of audio signal\r\n// TODO: understand, tweak, experiment\r\nexport function findFundamentalFrequency(buffer, sampleRate) {\r\n  const n = 1024\r\n  let bestK = -1\r\n  let bestR = 0\r\n\r\n  for (let k = 8; k <= 1000; k++) {\r\n    let sum = 0\r\n    for (let i = 0; i < n; i++) {\r\n      sum += ((buffer[i] - 128) / 128) * ((buffer[i + k] - 128) / 128)\r\n    }\r\n\r\n    const r = sum / (n + k)\r\n    if (r > bestR) {\r\n      bestR = r\r\n      bestK = k\r\n    }\r\n\r\n    if (r > 0.9) {\r\n      // Let's assume that this is good enough and stop right here\r\n      break\r\n    }\r\n  }\r\n\r\n  if (bestR > 0.0025) {\r\n    // The period (in frames) of the fundamental frequency is 'bestK'. Getting the frequency from there is trivial.\r\n    const fundamentalFreq = sampleRate / bestK\r\n    return fundamentalFreq\r\n  } else {\r\n    // We haven't found a good correlation\r\n    return undefined\r\n  }\r\n}\r\n","import { AudioContext, findFundamentalFrequency } from './util'\r\n\r\nexport default async function create() {\r\n  const audioContext = new AudioContext()\r\n  const analyser = audioContext.createAnalyser()\r\n  analyser.fftSize = 2048\r\n  const buffer = new Uint8Array(analyser.fftSize)\r\n  audioContext.suspend()\r\n\r\n  const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\r\n  const microphone = audioContext.createMediaStreamSource(stream)\r\n  microphone.connect(analyser)\r\n\r\n  return {\r\n    start: () => audioContext.resume(),\r\n    stop: () => audioContext.suspend(),\r\n    destroy: () => audioContext.close(),\r\n    samplePitch: () => {\r\n      analyser.getByteTimeDomainData(buffer)\r\n      return findFundamentalFrequency(buffer, audioContext.sampleRate)\r\n    },\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport styled, { withTheme } from 'styled-components'\r\nimport { withContentRect } from 'react-measure'\r\nimport { easeElastic, easeExpInOut } from 'd3-ease'\r\n\r\nimport {\r\n  deltaCents,\r\n  addCents,\r\n  notes,\r\n  centerNote,\r\n  centerFrequency,\r\n  nearestNote,\r\n  frequencyOfNote,\r\n} from '../audio'\r\n\r\nconst hz = 'Hz'\r\nconst snapDuration = 0.5\r\nconst needleWidth = 5\r\n\r\nconst Canvas = styled.canvas.attrs(\r\n  // required for pointer events polyfill\r\n  { 'touch-action': 'none' },\r\n)`\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  touch-action: none;\r\n`\r\n\r\nclass FrequencySlider extends Component {\r\n  static defaultProps = {\r\n    pixelsPerCent: 3,\r\n  }\r\n\r\n  canvasEl = null\r\n  snapRefId = null\r\n  state = {\r\n    panning: false,\r\n    panStart: null,\r\n    startFrequency: 0,\r\n    snapStart: null,\r\n    snapToFrequency: 0,\r\n  }\r\n\r\n  setCanvasRef = element => {\r\n    this.canvasEl = element\r\n    this.props.measureRef(element)\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.renderGraphics()\r\n  }\r\n\r\n  render() {\r\n    const { onFrequencyChange } = this.props\r\n\r\n    return (\r\n      <Canvas\r\n        ref={this.setCanvasRef}\r\n        onPointerDown={onFrequencyChange && this.startPanning}\r\n        onPointerUp={onFrequencyChange && this.stopPanning}\r\n        onPointerCancel={onFrequencyChange && this.stopPanning}\r\n        onPointerOut={onFrequencyChange && this.stopPanning}\r\n        onPointerMove={onFrequencyChange && this.pan}\r\n      />\r\n    )\r\n  }\r\n\r\n  startPanning = e => {\r\n    const { frequency } = this.props\r\n\r\n    if (this.snapRafId) {\r\n      cancelAnimationFrame(this.snapRafId)\r\n      this.snapRafId = undefined\r\n    }\r\n\r\n    this.setState({\r\n      panning: true,\r\n      panStart: e.nativeEvent.clientX,\r\n      startFrequency: frequency,\r\n    })\r\n  }\r\n\r\n  pan = e => {\r\n    const { panning, panStart, startFrequency } = this.state\r\n    const { onFrequencyChange, pixelsPerCent } = this.props\r\n\r\n    if (!panning) return\r\n\r\n    const panDelta = e.nativeEvent.clientX - panStart\r\n    const centDelta = -panDelta / pixelsPerCent\r\n    const newFrequency = addCents(startFrequency, centDelta)\r\n\r\n    onFrequencyChange(newFrequency)\r\n  }\r\n\r\n  stopPanning = () => {\r\n    const { panning } = this.state\r\n    if (!panning) return\r\n\r\n    this.setState((prevState, props) => {\r\n      const { frequency } = props\r\n      const snapToNote = nearestNote(frequency)\r\n      const snapToFrequency = frequencyOfNote(snapToNote)\r\n      return {\r\n        panning: false,\r\n        snapStart: performance.now(),\r\n        startFrequency: frequency,\r\n        snapToFrequency,\r\n      }\r\n    }, this.snap)\r\n  }\r\n\r\n  snap = () => {\r\n    const { panning, snapStart, startFrequency, snapToFrequency } = this.state\r\n    const { onFrequencyChange } = this.props\r\n    if (panning) return\r\n\r\n    const t = Math.min(\r\n      (performance.now() - snapStart) / (snapDuration * 1000),\r\n      1,\r\n    )\r\n\r\n    if (t < 1) {\r\n      const cents = deltaCents(snapToFrequency, startFrequency)\r\n      const newFrequency = addCents(startFrequency, easeElastic(t) * cents)\r\n      onFrequencyChange(newFrequency)\r\n      this.snapRafId = requestAnimationFrame(this.snap)\r\n    } else {\r\n      onFrequencyChange(snapToFrequency)\r\n    }\r\n  }\r\n\r\n  renderGraphics() {\r\n    const { canvasEl, props } = this\r\n    const { theme, contentRect } = props\r\n    if (!canvasEl) return\r\n\r\n    // To support hi-dpi screens, directly set the width and height\r\n    // of the canvas element to bounds scaled by the devicePixelRatio.\r\n    // The canvas CSS rules keep it fit to the CSS pixel layout, but\r\n    // during render we are drawing to a higher resolution canvas.\r\n    const { width, height } = deviceScaledBounds(contentRect.bounds)\r\n    canvasEl.width = width\r\n    canvasEl.height = height\r\n\r\n    const ctx = canvasEl.getContext('2d')\r\n    ctx.fillStyle = theme.info.background\r\n    ctx.fillRect(0, 0, width, height)\r\n\r\n    this.renderScale(ctx, width, height)\r\n    this.renderNeedle(ctx, width, height)\r\n    this.renderFrequency(ctx, width, height)\r\n  }\r\n\r\n  renderScale(ctx, width, height) {\r\n    const {\r\n      frequency,\r\n      theme,\r\n      contentRect,\r\n      pixelsPerCent: cssPixelsPerCent,\r\n    } = this.props\r\n\r\n    // No scale without a frequency\r\n    if (!frequency) return\r\n\r\n    // Determine how many cents fit in the width of the canvas.\r\n    // pixelsPerCent is in CSS pixels, so we need to rescale them\r\n    // to our actual canvas width.\r\n    const { width: cssWidth } = contentRect.bounds\r\n    const centsOnScale = cssWidth / cssPixelsPerCent\r\n    const pixelsPerCent = width / centsOnScale\r\n\r\n    // Measure which semitone is closest to center, how far from center\r\n    // it is, and how many semitones are visible on each side\r\n    const centsFromCenterOfScale = deltaCents(frequency, centerFrequency)\r\n    const semitonesFromCenter = Math.floor((centsFromCenterOfScale + 50) / 100)\r\n    const semitoneNearestCenter = centerNote + semitonesFromCenter\r\n    const centsFromCenterOfScreen =\r\n      centsFromCenterOfScale - semitonesFromCenter * 100\r\n    const numberOfTicksOnEachSide = Math.ceil(centsOnScale / 200) + 1\r\n\r\n    // If there is enough room between semitones,\r\n    // draw 10 cent tick marks as well\r\n    const shouldDrawMinorTicks = cssPixelsPerCent > 1.75\r\n\r\n    // Semitone marks\r\n    const center = 0.5 * width\r\n    const tickLength = 0.2 * height\r\n    const y1 = height\r\n    const y2 = height - tickLength\r\n    for (let i = -numberOfTicksOnEachSide; i <= numberOfTicksOnEachSide; i++) {\r\n      // Semitone Tick\r\n      ctx.fillStyle = i === 0 ? theme.info.primary : theme.info.secondary\r\n      ctx.strokeStyle = i === 0 ? theme.info.primary : theme.info.secondary\r\n      ctx.lineWidth = deviceScaled(needleWidth) / 2\r\n      const x = center - (centsFromCenterOfScreen + 100 * i) * pixelsPerCent\r\n      strokeVertical(ctx, x, y1, y2)\r\n\r\n      // Semitone label\r\n      //\r\n      // The semitone label nearest to the center is moved up\r\n      // and scaled based on its distance to the needle\r\n      const name = notes[semitoneNearestCenter - i]\r\n      const t =\r\n        i === 0 ? easeExpInOut(1 - Math.abs(centsFromCenterOfScreen / 50)) : 0\r\n      const fontSize = lerp(t, 0.1, 0.3) * height\r\n      const y = lerp(t, 0.71, 0.45) * height\r\n      this.renderNoteLabel(ctx, x, y, fontSize, name)\r\n\r\n      // 10 cent division ticks\r\n      if (shouldDrawMinorTicks && i !== -numberOfTicksOnEachSide) {\r\n        ctx.strokeStyle = theme.info.secondary\r\n        ctx.lineWidth = deviceScaled(needleWidth) / 3\r\n        const minorTickLength = height * 0.1\r\n        const y2 = height - minorTickLength\r\n        for (let j = 1; j <= 9; j++) {\r\n          const xt = x + j * 10 * pixelsPerCent\r\n          strokeVertical(ctx, xt, y1, y2)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  renderNoteLabel(ctx, x, y, size, note) {\r\n    // extract the parts of the note name by destructuring assignment,\r\n    // example: name A, sharp? ♯, octave 4\r\n    let name, sharp, octave\r\n    if (note.length < 3) {\r\n      ;[name, octave] = [...note]\r\n    } else {\r\n      ;[name, sharp, octave] = [...note]\r\n    }\r\n\r\n    // Create font strings and then measure everything.\r\n    const nameFont = this.fontOfSize(size)\r\n    const octaveFont = this.displayFontOfSize(0.5 * size)\r\n    let sharpFont\r\n    let nameSize, sharpSize, octaveSize\r\n    ctx.font = nameFont\r\n    nameSize = ctx.measureText(name)\r\n    if (sharp) {\r\n      sharpFont = this.displayFontOfSize(0.6 * size)\r\n      ctx.font = sharpFont\r\n      sharpSize = ctx.measureText(sharp)\r\n    }\r\n    ctx.font = octaveFont\r\n    octaveSize = ctx.measureText(octave)\r\n\r\n    // With everything measured, calculate the total widths and x positions.\r\n    // When a sharp is present, the octave number is moved out to the right\r\n    // slightly but not by the full width of the sharp character.\r\n    const sharpWidth = sharpSize ? sharpSize.width * 0.6 : 0\r\n    const totalWidth = nameSize.width + sharpWidth + octaveSize.width\r\n    const dx = -0.5 * totalWidth\r\n    const nameX = x + dx\r\n    const sharpX = nameX + nameSize.width\r\n    const octaveX = sharpX + sharpWidth\r\n\r\n    // Draw the text.\r\n    ctx.font = nameFont\r\n    ctx.fillText(name, nameX, y)\r\n    if (sharp) {\r\n      ctx.font = sharpFont\r\n      ctx.fillText(sharp, sharpX, y - 0.3 * size)\r\n    }\r\n    ctx.font = octaveFont\r\n    ctx.fillText(octave, octaveX, y + 0.25 * size)\r\n  }\r\n\r\n  renderNeedle(ctx, width, height) {\r\n    ctx.strokeStyle = this.props.theme.shades.accent\r\n    ctx.lineWidth = deviceScaled(needleWidth)\r\n    const x = 0.5 * width\r\n    const needleLength = 0.45 * height\r\n    const y1 = height\r\n    const y2 = height - needleLength\r\n    strokeVertical(ctx, x, y1, y2)\r\n  }\r\n\r\n  renderFrequency(ctx, width, height) {\r\n    const { frequency = 0, theme } = this.props\r\n\r\n    const size = Math.min(0.15 * height, 0.1 * width)\r\n    const marginTop = 0.2 * size\r\n    const marginRight = 1.8 * marginTop\r\n    const x = width - marginRight\r\n    const y = size + marginTop\r\n\r\n    const frequencyFont = this.fontOfSize(size)\r\n    const hzFont = this.displayFontOfSize(size * 0.5)\r\n\r\n    ctx.textAlign = 'right'\r\n    ctx.fillStyle = theme.info.secondary\r\n    ctx.font = hzFont\r\n    ctx.fillText(hz, x, y)\r\n    const { width: hzWidth } = ctx.measureText(hz)\r\n    ctx.fillStyle = theme.info.primary\r\n    ctx.font = frequencyFont\r\n    ctx.fillText(frequency.toFixed(1), x - hzWidth, y)\r\n  }\r\n\r\n  fontOfSize(size) {\r\n    return `bold ${size}px ${this.props.theme.text.family.interface}`\r\n  }\r\n\r\n  displayFontOfSize(size) {\r\n    return `${size}px ${this.props.theme.text.family.display}`\r\n  }\r\n}\r\n\r\nexport default withContentRect('bounds')(withTheme(FrequencySlider))\r\n\r\n//\r\n// Utility funcitons\r\n//\r\n\r\nfunction lerp(t, min, max) {\r\n  return min * (1 - t) + max * t\r\n}\r\n\r\nfunction deviceScaled(x) {\r\n  return x * window.devicePixelRatio\r\n}\r\n\r\nfunction deviceScaledBounds(bounds) {\r\n  return {\r\n    width:\r\n      Math.round(deviceScaled(bounds.right)) -\r\n      Math.round(deviceScaled(bounds.left)),\r\n    height:\r\n      Math.round(deviceScaled(bounds.bottom)) -\r\n      Math.round(deviceScaled(bounds.top)),\r\n  }\r\n}\r\n\r\nfunction strokeVertical(ctx, x, y1, y2) {\r\n  ctx.beginPath()\r\n  ctx.moveTo(x, y1)\r\n  ctx.lineTo(x, y2)\r\n  ctx.closePath()\r\n  ctx.stroke()\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst Graphic = styled.svg`\r\n  height: 100%;\r\n  cursor: ${props => (props.onClick ? 'pointer' : 'default')};\r\n  --color: ${props => (props.on ? props.theme.active : props.theme.inactive)};\r\n  circle {\r\n    stroke: var(--color);\r\n  }\r\n`\r\n\r\nexport default function IconButton({ children, ...rest }) {\r\n  return (\r\n    <Graphic {...rest} viewBox=\"0 0 1 1\" role=\"button\">\r\n      <circle cx=\"50%\" cy=\"50%\" r=\"47.5%\" strokeWidth=\"5%\" fill=\"none\" />\r\n      <svg x=\"10%\" y=\"10%\" width=\"80%\" height=\"80%\">\r\n        {children}\r\n      </svg>\r\n    </Graphic>\r\n  )\r\n}\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M276.02 303.939h.453l-.453-8.959C276.02 171.362 376.382 71 500 71s223.98 100.362 223.98 223.98l-.453 8.959h.453v250.857h-.906c-4.507 119.543-102.955 215.02-223.527 215.02-120.572 0-219.02-95.477-223.527-215.02V303.939z\",\n  fill: \"#fff\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M764.264 545.494a27.257 27.257 0 0 1-.315-4.137c0-14.93 12.121-27.051 27.051-27.051 14.93 0 27.051 12.121 27.051 27.051v.514C817.773 717.172 675.366 859.408 500 859.408c-175.537 0-318.051-142.514-318.051-318.051l.001-.175c.094-14.849 12.178-26.876 27.05-26.876 14.93 0 27.051 12.121 27.051 27.051 0 1.406-.108 2.788-.315 4.137C237.951 689.46 355.514 805.653 500 805.653c144.487 0 262.05-116.194 264.264-260.159zM410.348 895.125h179.304c14.93 0 27.051 12.121 27.051 27.051 0 14.929-12.121 27.051-27.051 27.051H410.348c-14.93 0-27.051-12.122-27.051-27.051 0-14.93 12.121-27.051 27.051-27.051z\",\n  fill: \"#fff\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1000 1000\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: 1.414\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/mic.246dec23.svg\";\nexport { SvgComponent as ReactComponent };","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport IconButton from './IconButton'\r\nimport { ReactComponent as MicIcon } from '../icon/mic.svg'\r\n\r\nconst FilledMicIcon = styled(MicIcon)`\r\n  path {\r\n    fill: var(--color);\r\n  }\r\n`\r\n\r\nexport default function MicButton(props) {\r\n  return (\r\n    <IconButton {...props}>\r\n      <FilledMicIcon />\r\n    </IconButton>\r\n  )\r\n}\r\n","import React, { PureComponent } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport Flex from './Flex'\r\nimport ControlledDisplay from './ControlledDisplay'\r\nimport FrequencySlider from './FrequencySlider'\r\nimport MicButton from './MicButton'\r\nimport { createMicAnalyser } from '../audio'\r\n\r\nconst Error = styled(Flex)`\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n\r\nexport default class Tuner extends PureComponent {\r\n  rafId = null\r\n  analyser = null\r\n  state = {\r\n    tuning: false,\r\n    frequency: undefined,\r\n    error: undefined,\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { analyser } = this\r\n    const { tuning } = this.state\r\n\r\n    if (tuning !== prevState.tuning) {\r\n      // If this is the first time to enable the tuner, we need\r\n      // to create the analyser. This is an async operation, so\r\n      // when it's done we'll go ahead and start it.\r\n      if (!analyser) {\r\n        createMicAnalyser()\r\n          .then(analyser => {\r\n            this.analyser = analyser\r\n            this.startTuner()\r\n          })\r\n          .catch(error => {\r\n            console.error(error)\r\n            this.setState({ error })\r\n          })\r\n      } else if (tuning) {\r\n        this.startTuner()\r\n      } else {\r\n        this.stopTuner()\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { analyser, rafId } = this\r\n    if (analyser) analyser.destroy()\r\n    if (rafId) cancelAnimationFrame(rafId)\r\n  }\r\n\r\n  startTuner() {\r\n    this.analyser.start()\r\n    this.rafId = requestAnimationFrame(this.sample)\r\n  }\r\n\r\n  stopTuner() {\r\n    this.analyser.stop()\r\n    cancelAnimationFrame(this.rafId)\r\n  }\r\n\r\n  toggleTuner = () => {\r\n    this.setState(prevState => ({\r\n      tuning: !prevState.tuning,\r\n    }))\r\n  }\r\n\r\n  sample = () => {\r\n    const { analyser, sample } = this\r\n\r\n    const frequency = analyser.samplePitch()\r\n    // Don't change the frequency back to undefined;\r\n    // leave the display at the last seen frequency\r\n    if (frequency !== undefined) {\r\n      this.setState({ frequency })\r\n    }\r\n\r\n    this.rafId = requestAnimationFrame(sample)\r\n  }\r\n\r\n  render() {\r\n    const { error, tuning, frequency } = this.state\r\n    return error ? (\r\n      <Error>error: no microphone</Error>\r\n    ) : (\r\n      <ControlledDisplay\r\n        display={<FrequencySlider frequency={frequency} pixelsPerCent={3} />}\r\n        controls={<MicButton on={tuning} onClick={this.toggleTuner} />}\r\n      />\r\n    )\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport { easeElastic } from 'd3-ease'\r\n\r\nimport IconButton from './IconButton'\r\n\r\nconst sinPath = amplitude => `\r\nM -1 0\r\nQ -0.5 ${amplitude} 0 0\r\nT 1 0\r\n`\r\n\r\nconst durationMS = 600\r\n\r\n//\r\n// Edge doesn't support SVG path animations, so this is a\r\n// JavaScript animated icon.\r\n//\r\nclass WaveForm extends Component {\r\n  state = { lastToggle: -Infinity }\r\n\r\n  componentDidUpdate(prevProps) {\r\n    if (this.props.on !== prevProps.on)\r\n      this.setState({ lastToggle: performance.now() }, this.animate)\r\n  }\r\n\r\n  // Normalized animation time [0, 1]\r\n  t() {\r\n    return Math.min(1, (performance.now() - this.state.lastToggle) / durationMS)\r\n  }\r\n\r\n  // Rather than set state, just force rerender\r\n  // until animation time met\r\n  animate = () => {\r\n    this.forceUpdate()\r\n    if (this.t() < 1) {\r\n      requestAnimationFrame(this.animate)\r\n    }\r\n  }\r\n\r\n  render() {\r\n    const t = easeElastic(this.t())\r\n    const amplitude = 0.75 * (this.props.on ? t : 1 - t)\r\n    return (\r\n      <svg viewBox=\"-1.2 -1 2.4 2\">\r\n        <path\r\n          d={sinPath(amplitude)}\r\n          strokeWidth=\"0.15\"\r\n          strokeLinecap=\"round\"\r\n          stroke=\"var(--color)\"\r\n          fill=\"none\"\r\n        />\r\n      </svg>\r\n    )\r\n  }\r\n}\r\n\r\nexport default ({ on, ...props }) => (\r\n  <IconButton on={on} {...props}>\r\n    <WaveForm on={on} />\r\n  </IconButton>\r\n)\r\n","import React, { Component } from 'react'\r\n\r\nimport ControlledDisplay from './ControlledDisplay'\r\nimport FrequencySlider from './FrequencySlider'\r\nimport ToneButton from './ToneButton'\r\nimport { createToneGenerator } from '../audio'\r\n\r\nexport default class ToneGenerator extends Component {\r\n  generator = null\r\n  state = {\r\n    frequency: 440,\r\n    playing: false,\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    let { generator } = this\r\n    const { frequency, playing } = this.state\r\n\r\n    // toggle playing, create generator if necessary\r\n    if (playing !== prevState.playing) {\r\n      if (!generator) {\r\n        generator = createToneGenerator()\r\n        generator.setFrequency(frequency)\r\n        this.generator = generator\r\n      }\r\n\r\n      if (prevState.playing) {\r\n        generator.stop()\r\n      } else {\r\n        generator.start()\r\n      }\r\n    }\r\n\r\n    // update frequency\r\n    if (generator && frequency !== prevState.frequency) {\r\n      generator.setFrequency(frequency)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { generator } = this\r\n    if (generator) {\r\n      generator.destroy()\r\n    }\r\n  }\r\n\r\n  toggleTone = () => {\r\n    this.setState(prevState => ({ playing: !prevState.playing }))\r\n  }\r\n\r\n  setFrequency = frequency => {\r\n    this.setState({ frequency })\r\n  }\r\n\r\n  render() {\r\n    const { playing, frequency } = this.state\r\n    return (\r\n      <ControlledDisplay\r\n        display={\r\n          <FrequencySlider\r\n            frequency={frequency}\r\n            onFrequencyChange={this.setFrequency}\r\n            pixelsPerCent={1.4}\r\n          />\r\n        }\r\n        controls={\r\n          <ToneButton\r\n            on={playing}\r\n            frequency={frequency}\r\n            onClick={this.toggleTone}\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }\r\n}\r\n","import { AudioContext } from './util'\r\n\r\nexport default function create() {\r\n  const audioContext = new AudioContext()\r\n  const oscillator = audioContext.createOscillator()\r\n  oscillator.start()\r\n  oscillator.connect(audioContext.destination)\r\n  audioContext.suspend()\r\n\r\n  return {\r\n    setFrequency: f => (oscillator.frequency.value = f),\r\n    start: () => audioContext.resume(),\r\n    stop: () => audioContext.suspend(),\r\n    destroy: () => audioContext.close(),\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styled, { ThemeProvider, createGlobalStyle } from 'styled-components'\r\nimport theme from './theme'\r\n\r\nimport Navigator from './components/Navigator'\r\nimport Tuner from './components/Tuner'\r\nimport ToneGenerator from './components/ToneGenerator'\r\n\r\nconst GlobalStyle = createGlobalStyle`\r\n  ${props => props.theme.text.family.import}\r\n\r\n  * {\r\n    margin: 0;\r\n    padding: 0;\r\n    box-sizing: border-box;\r\n    user-select: none;\r\n    -webkit-tap-highlight-color: transparent;\r\n  }\r\n\r\n  html,\r\n  body,\r\n  #root {\r\n    overflow: hidden;\r\n    height: 100%;\r\n    width: 100vw;\r\n    display: flex;\r\n    flex-direction: column;\r\n    background: ${props => props.theme.background};\r\n  }\r\n\r\n  body {\r\n    font-family: ${props => props.theme.text.family.interface};\r\n  }\r\n`\r\n\r\nconst Header = styled.header`\r\n  padding: 1em;\r\n  background: ${props => props.theme.foreground};\r\n  @media (max-height: 700px) {\r\n    font-size: 0.7em;\r\n    padding: 0.5em;\r\n  }\r\n`\r\n\r\nconst Title = styled.h1`\r\n  font-family: ${props => props.theme.text.family.display};\r\n  color: ${props => props.theme.text.color};\r\n`\r\n\r\nexport default ({ extraOptions = [] }) => (\r\n  <ThemeProvider theme={theme}>\r\n    <>\r\n      <GlobalStyle />\r\n      <Header>\r\n        <Title>oh fiddle bits!</Title>\r\n      </Header>\r\n      <Navigator>\r\n        {[\r\n          { name: 'tune', view: Tuner },\r\n          { name: 'tone', view: ToneGenerator },\r\n          { name: 'beat' },\r\n        ].concat(extraOptions)}\r\n      </Navigator>\r\n    </>\r\n  </ThemeProvider>\r\n)\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport registerServiceWorker from './registerServiceWorker'\r\n\r\nimport App from './App'\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  ReactDOM.render(<App />, document.getElementById('root'))\r\n  registerServiceWorker()\r\n} else {\r\n  import('./test/components/TestAnalyser').then(({ default: TestAnalyser }) => {\r\n    ReactDOM.render(\r\n      <App extraOptions={[{ name: 'test', view: TestAnalyser }]} />,\r\n      document.getElementById('root'),\r\n    )\r\n  })\r\n}\r\n"],"sourceRoot":""}