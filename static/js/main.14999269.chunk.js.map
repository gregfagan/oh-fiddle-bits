{"version":3,"sources":["components/Flex.js","components/Navigator.js","components/ControlledDisplay.js","audio/util.js","audio/micAnalyser.js","components/FrequencySlider.js","icon/mic.svg","components/Tuner.js","components/ToneButton.js","components/ToneGenerator.js","audio/toneGenerator.js","App.js","registerServiceWorker.js","index.js"],"names":["Flex","styled_components_browser_esm","div","_templateObject","makeURI","name","encodeURI","replace","Container","Object","Navigator_templateObject","props","portrait","Nav","withComponent","_templateObject2","View","Option","a","attrs","rel","href","render","children","_templateObject3","selected","_templateObject4","isPortrait","window","innerWidth","innerHeight","Navigator_Navigator","_Component","Navigator","_getPrototypeOf2","_temp","_this","_classCallCheck","this","_len","arguments","length","args","Array","_key","_possibleConstructorReturn","_getPrototypeOf","call","apply","concat","state","key","value","_this2","onhashchange","forceUpdate","onresize","orient","setState","view","current","location","hash","options","react_default","Children","toArray","map","child","i","_child$props","cloneElement","createElement","_inherits","react","Display","Controls","ControlledDisplay_templateObject","ControlledDisplay","_ref","display","controls","Fragment","button","ControlledDisplay_templateObject2","AudioContext","webkitAudioContext","log2","Math","log","notes","chromatic","names","_i","push","centerNote","indexOf","centerFrequency","deltaCents","f1","f2","floor","addCents","f","cents","pow","findFundamentalFrequency","buffer","sampleRate","bestK","bestR","k","sum","r","_callee","audioContext","analyser","stream","regenerator_default","wrap","_context","prev","next","createAnalyser","fftSize","Uint8Array","suspend","navigator","mediaDevices","getUserMedia","audio","sent","createMediaStreamSource","connect","abrupt","start","resume","stop","destroy","close","samplePitch","getByteTimeDomainData","lerp","t","min","max","snapDuration","Canvas","canvas","touch-action","FrequencySlider_templateObject","FrequencySlider_FrequencySlider","canvasEl","snapRefId","panning","panStart","startFrequency","snapStart","snapToFrequency","setCanvasRef","element","measureRef","startPanning","e","frequency","snapRafId","cancelAnimationFrame","undefined","nativeEvent","clientX","pan","_this$state","_this$props","onFrequencyChange","pixelsPerCent","stopPanning","prevState","centsFromCenter","semitonesFromCenter","snapToNote","round","performance","now","snap","_this$state2","d3_ease_src","requestAnimationFrame","renderGraphics","innerRef","onPointerDown","onPointerUp","onPointerCancel","onPointerOut","onPointerMove","bounds","ratio","ctx","getContext","_props$frequency","contentRect","cssPixelsPerCent","cssWidth","width","_deviceScaledBounds","devicePixelRatio","right","left","height","bottom","top","fillStyle","fillRect","halfWidth","halfHeight","needleWidth","strokeStyle","lineWidth","beginPath","moveTo","lineTo","closePath","stroke","centsOnScale","centsFromCenterOfScale","semitoneNearestCenter","centsFromCenterOfScreen","textAlign","numberOfTicksOnEachSide","ceil","x","abs","fontScale","y","font","fillText","j","xt","labelSize","margin","textBaseline","toFixed","defaultProps","components_FrequencySlider","react_measure","_extends","assign","target","source","prototype","hasOwnProperty","mic_ref","d","fill","_ref2","mic_SvgComponent","viewBox","fillRule","clipRule","strokeLinejoin","strokeMiterlimit","__webpack_require__","p","Mic","on","rest","_objectWithoutProperties","Tuner_templateObject","Error","Tuner_templateObject2","Tuner_Tuner","rafId","tuning","error","toggleTuner","sample","_assertThisInitialize","Tuner_assertThisInitialized","prevProps","startTuner","stopTuner","_create","micAnalyser_create","then","catch","console","onClick","amplitude","TWO_PI","PI","Graphic","svg","ToneButton_templateObject","WaveForm","path","ToneButton_templateObject2","_ref3","ToneButton","_ref4","ToneButton_objectWithoutProperties","cx","cy","ToneGenerator_ToneGenerator","generator","playing","toggleTone","setFrequency","oscillator","createOscillator","destination","Header","header","App_templateObject","Title","h1","App_templateObject2","isLocalhost","Boolean","hostname","match","registerValidSW","swUrl","serviceWorker","register","registration","onupdatefound","installingWorker","installing","onstatechange","controller","react_dom_default","extraOptions","document","getElementById","URL","origin","addEventListener","fetch","response","status","headers","get","ready","unregister","reload","checkValidServiceWorker"],"mappings":"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","file":"static/js/main.14999269.chunk.js","sourcesContent":["import styled from 'styled-components'\r\n\r\n// A flexbox configured with the most commonly used flex\r\n// properties in the app.\r\nexport default styled.div`\r\n  display: flex;\r\n\r\n  /* Grow down */\r\n  flex-flow: column;\r\n\r\n  /* Grow and shrink without a basis */\r\n  flex: 1 1 0;\r\n\r\n  /* Prevent child elements from pushing out the size of this one */\r\n  overflow: hidden;\r\n`\r\n","import React, { Component } from 'react'\r\nimport styled, { css } from 'styled-components'\r\nimport Flex from './Flex'\r\n\r\nfunction makeURI(name) {\r\n  return encodeURI('#' + name.replace(' ', '-'))\r\n}\r\n\r\nconst Container = styled(Flex)`\r\n  flex-flow: ${props => (props.portrait ? 'column-reverse' : 'row')};\r\n`\r\n\r\nconst Nav = styled(Flex.withComponent('nav'))`\r\n  background: #111;\r\n  flex: 0 0 auto;\r\n  flex-flow: ${props => (props.portrait ? 'row' : 'column')};\r\n  align-items: center;\r\n`\r\n\r\nconst View = Flex.withComponent('main')\r\n\r\nexport const Option = styled.a.attrs({\r\n  rel: 'internal',\r\n  href: props => props.render && makeURI(props.children),\r\n})`\r\n  display: block;\r\n  user-select: none;\r\n  cursor: ${props => (props.render ? 'pointer' : 'default')};\r\n  padding: ${props => (props.portrait ? '1em' : '1em 3em')};\r\n  outline: none;\r\n  text-align: center;\r\n  text-decoration: none;\r\n  text-transform: uppercase;\r\n  font-weight: bold;\r\n  color: ${props => (props.render ? 'white' : '#222')};\r\n  background: ${props => props.selected && '#222'};\r\n  flex-grow: ${props => (props.portrait ? 1 : 0)}\r\n    ${props =>\r\n      props.selected &&\r\n      css`\r\n      border-${props.portrait ? 'top' : 'right'}: 5px solid transparent;\r\n      border-${props.portrait ? 'bottom' : 'left'}: 5px solid red;\r\n    `};\r\n`\r\n\r\nfunction isPortrait() {\r\n  return window.innerWidth < window.innerHeight\r\n}\r\n\r\nexport class Navigator extends Component {\r\n  state = {\r\n    portrait: isPortrait(),\r\n  }\r\n\r\n  componentDidMount() {\r\n    window.onhashchange = () => this.forceUpdate()\r\n    window.onresize = () => this.orient()\r\n  }\r\n\r\n  orient() {\r\n    const portrait = isPortrait()\r\n    if (portrait !== this.state.portrait) this.setState({ portrait })\r\n  }\r\n\r\n  render() {\r\n    const { portrait } = this.state\r\n    const { children } = this.props\r\n\r\n    const current = window.location.hash\r\n\r\n    // The children of this component should be `Option`s. Iterate\r\n    // over them, injecting calculated props for selection and\r\n    // orientation. If the selected option is found and provides\r\n    // a `render` prop, call it to generate the current view.\r\n    let view\r\n    const options = React.Children.toArray(children).map((child, i) => {\r\n      const { children: name, render } = child.props\r\n      // Check the URI form of the given option name against the current\r\n      // window hash location. If there is no current hash location, the\r\n      // first item defaults to selected.\r\n      const selected = current ? current === makeURI(name) : i === 0\r\n\r\n      // If this is the current view, render it\r\n      if (selected && render) {\r\n        view = render()\r\n      }\r\n\r\n      return React.cloneElement(child, { portrait, selected })\r\n    })\r\n\r\n    return (\r\n      <Container portrait={portrait}>\r\n        <Nav portrait={portrait}>{options}</Nav>\r\n        <View>{view}</View>\r\n      </Container>\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\nimport Flex from './Flex'\r\n\r\nconst Display = Flex.withComponent('figure')\r\nconst Controls = styled(Flex)`\r\n  align-items: center;\r\n  padding: 2em;\r\n`\r\n\r\nexport default ({ display, controls }) => (\r\n  <>\r\n    <Display>{display}</Display>\r\n    <Controls>{controls}</Controls>\r\n  </>\r\n)\r\n\r\nexport const Button = styled.button`\r\n  background: orange;\r\n  border: none;\r\n  padding: 10px;\r\n  cursor: pointer;\r\n`\r\n","export const AudioContext = window.AudioContext || window.webkitAudioContext\r\n\r\nconst log2 = Math.log(2)\r\n\r\n// An array note names based on commonly used\r\n// https://en.wikipedia.org/wiki/Scientific_pitch_notation\r\nexport const notes = (() => {\r\n  const chromatic = [\r\n    'C',\r\n    'C#',\r\n    'D',\r\n    'D#',\r\n    'E',\r\n    'F',\r\n    'F#',\r\n    'G',\r\n    'G#',\r\n    'A',\r\n    'A#',\r\n    'B',\r\n  ]\r\n  const names = []\r\n  for (let i = 0; i <= 8; i++) {\r\n    for (let name of chromatic) {\r\n      names.push(name + i)\r\n    }\r\n  }\r\n\r\n  return names\r\n})()\r\n\r\nexport const centerNote = notes.indexOf('A4')\r\nexport const centerFrequency = 440\r\n\r\nexport function nearestNote(f) {\r\n  const centsFromCenter = deltaCents(f, centerFrequency)\r\n  const semitonesFromCenter = Math.round(centsFromCenter / 100)\r\n  const note = centerNote + semitonesFromCenter\r\n  return note\r\n}\r\n\r\nexport function frequencyOfNote(note) {\r\n  const semitonesFromCenter = note - centerNote\r\n  const centsFromCenter = semitonesFromCenter * 100\r\n  return addCents(centerFrequency, centsFromCenter)\r\n}\r\n\r\n// Returns the difference between frequencies f1 and f2 in cents\r\n// https://en.wikipedia.org/wiki/Cent_(music)\r\nexport function deltaCents(f1, f2) {\r\n  return Math.floor(1200 * (Math.log(f1 / f2) / log2))\r\n}\r\n\r\n// Returns the frequency f shifted by the given number of cents\r\nexport function addCents(f, cents) {\r\n  return f * Math.pow(2, cents / 1200)\r\n}\r\n\r\n// Adapted from https://developer.microsoft.com/en-us/microsoft-edge/testdrive/demos/webaudiotuner/\r\n// Use autocorrelation to find fundamental frequency of audio signal\r\n// TODO: understand, tweak, experiment\r\nexport function findFundamentalFrequency(buffer, sampleRate) {\r\n  const n = 1024\r\n  let bestK = -1\r\n  let bestR = 0\r\n\r\n  for (let k = 8; k <= 1000; k++) {\r\n    let sum = 0\r\n    for (let i = 0; i < n; i++) {\r\n      sum += ((buffer[i] - 128) / 128) * ((buffer[i + k] - 128) / 128)\r\n    }\r\n\r\n    const r = sum / (n + k)\r\n    if (r > bestR) {\r\n      bestR = r\r\n      bestK = k\r\n    }\r\n\r\n    if (r > 0.9) {\r\n      // Let's assume that this is good enough and stop right here\r\n      break\r\n    }\r\n  }\r\n\r\n  if (bestR > 0.0025) {\r\n    // The period (in frames) of the fundamental frequency is 'bestK'. Getting the frequency from there is trivial.\r\n    const fundamentalFreq = sampleRate / bestK\r\n    return fundamentalFreq\r\n  } else {\r\n    // We haven't found a good correlation\r\n    return undefined\r\n  }\r\n}\r\n","import { AudioContext, findFundamentalFrequency } from './util'\r\n\r\nexport default async function create() {\r\n  const audioContext = new AudioContext()\r\n  const analyser = audioContext.createAnalyser()\r\n  analyser.fftSize = 2048\r\n  const buffer = new Uint8Array(analyser.fftSize)\r\n  audioContext.suspend()\r\n\r\n  const stream = await navigator.mediaDevices.getUserMedia({ audio: true })\r\n  const microphone = audioContext.createMediaStreamSource(stream)\r\n  microphone.connect(analyser)\r\n\r\n  return {\r\n    start: () => audioContext.resume(),\r\n    stop: () => audioContext.suspend(),\r\n    destroy: () => audioContext.close(),\r\n    samplePitch: () => {\r\n      analyser.getByteTimeDomainData(buffer)\r\n      return findFundamentalFrequency(buffer, audioContext.sampleRate)\r\n    },\r\n  }\r\n}\r\n","import React, { Component } from 'react'\r\nimport styled from 'styled-components'\r\nimport { withContentRect } from 'react-measure'\r\nimport { easeElastic, easeExpInOut } from 'd3-ease'\r\n\r\nimport {\r\n  deltaCents,\r\n  addCents,\r\n  notes,\r\n  centerNote,\r\n  centerFrequency,\r\n  nearestNote,\r\n  frequencyOfNote,\r\n} from '../audio'\r\n\r\nfunction lerp(t, min, max) {\r\n  return min * (1 - t) + max * t\r\n}\r\n\r\nconst snapDuration = 0.5\r\n\r\nconst Canvas = styled.canvas.attrs(\r\n  // required for pointer events polyfill\r\n  { 'touch-action': 'none' },\r\n)`\r\n  display: block;\r\n  width: 100%;\r\n  height: 100%;\r\n  touch-action: none;\r\n`\r\n\r\nfunction deviceScaledBounds(bounds) {\r\n  const ratio = window.devicePixelRatio\r\n\r\n  return {\r\n    width: Math.round(ratio * bounds.right) - Math.round(ratio * bounds.left),\r\n    height: Math.round(ratio * bounds.bottom) - Math.round(ratio * bounds.top),\r\n  }\r\n}\r\n\r\nclass FrequencySlider extends Component {\r\n  static defaultProps = {\r\n    pixelsPerCent: 3,\r\n  }\r\n\r\n  canvasEl = null\r\n  snapRefId = null\r\n  state = {\r\n    panning: false,\r\n    panStart: null,\r\n    startFrequency: 0,\r\n    snapStart: null,\r\n    snapToFrequency: 0,\r\n  }\r\n\r\n  setCanvasRef = element => {\r\n    this.canvasEl = element\r\n    this.props.measureRef(element)\r\n  }\r\n\r\n  componentDidUpdate() {\r\n    this.renderGraphics()\r\n  }\r\n\r\n  render() {\r\n    const { onFrequencyChange } = this.props\r\n\r\n    return (\r\n      <Canvas\r\n        innerRef={this.setCanvasRef}\r\n        onPointerDown={onFrequencyChange && this.startPanning}\r\n        onPointerUp={onFrequencyChange && this.stopPanning}\r\n        onPointerCancel={onFrequencyChange && this.stopPanning}\r\n        onPointerOut={onFrequencyChange && this.stopPanning}\r\n        onPointerMove={onFrequencyChange && this.pan}\r\n      />\r\n    )\r\n  }\r\n\r\n  startPanning = e => {\r\n    const { frequency } = this.props\r\n\r\n    if (this.snapRafId) {\r\n      cancelAnimationFrame(this.snapRafId)\r\n      this.snapRafId = undefined\r\n    }\r\n\r\n    this.setState({\r\n      panning: true,\r\n      panStart: e.nativeEvent.clientX,\r\n      startFrequency: frequency,\r\n    })\r\n  }\r\n\r\n  pan = e => {\r\n    const { panning, panStart, startFrequency } = this.state\r\n    const { onFrequencyChange, pixelsPerCent } = this.props\r\n\r\n    if (!panning) return\r\n\r\n    const panDelta = e.nativeEvent.clientX - panStart\r\n    const centDelta = -panDelta / pixelsPerCent\r\n    const newFrequency = addCents(startFrequency, centDelta)\r\n\r\n    onFrequencyChange(newFrequency)\r\n  }\r\n\r\n  stopPanning = () => {\r\n    const { panning } = this.state\r\n    if (!panning) return\r\n\r\n    this.setState((prevState, props) => {\r\n      const { frequency } = props\r\n      const snapToNote = nearestNote(frequency)\r\n      const snapToFrequency = frequencyOfNote(snapToNote)\r\n      return {\r\n        panning: false,\r\n        snapStart: performance.now(),\r\n        startFrequency: frequency,\r\n        snapToFrequency,\r\n      }\r\n    }, this.snap)\r\n  }\r\n\r\n  snap = () => {\r\n    const { panning, snapStart, startFrequency, snapToFrequency } = this.state\r\n    const { onFrequencyChange } = this.props\r\n    if (panning) return\r\n\r\n    const t = Math.min(\r\n      (performance.now() - snapStart) / (snapDuration * 1000),\r\n      1,\r\n    )\r\n\r\n    if (t < 1) {\r\n      const cents = deltaCents(snapToFrequency, startFrequency)\r\n      const newFrequency = addCents(startFrequency, easeElastic(t) * cents)\r\n      onFrequencyChange(newFrequency)\r\n      this.snapRafId = requestAnimationFrame(this.snap)\r\n    } else {\r\n      onFrequencyChange(snapToFrequency)\r\n    }\r\n  }\r\n\r\n  renderGraphics() {\r\n    const { canvasEl, props } = this\r\n    if (!canvasEl) return\r\n    const ctx = canvasEl.getContext('2d')\r\n    const {\r\n      frequency = 0,\r\n      contentRect,\r\n      pixelsPerCent: cssPixelsPerCent,\r\n    } = props\r\n    const { width: cssWidth } = contentRect.bounds\r\n    const { width, height } = deviceScaledBounds(contentRect.bounds)\r\n\r\n    canvasEl.width = width\r\n    canvasEl.height = height\r\n\r\n    ctx.fillStyle = 'white'\r\n    ctx.fillRect(0, 0, width, height)\r\n\r\n    // needle\r\n    const halfWidth = 0.5 * width\r\n    const halfHeight = 0.5 * height\r\n    const needleWidth = 7 * window.devicePixelRatio\r\n    ctx.strokeStyle = 'rgba(255, 0, 0, 0.75)'\r\n    ctx.lineWidth = needleWidth\r\n    ctx.beginPath()\r\n    ctx.moveTo(halfWidth, halfHeight)\r\n    ctx.lineTo(halfWidth, height)\r\n    ctx.closePath()\r\n    ctx.stroke()\r\n\r\n    // Semitone marks\r\n    const centsOnScale = cssWidth / cssPixelsPerCent\r\n    const pixelsPerCent = width / centsOnScale\r\n    const centsFromCenterOfScale = deltaCents(frequency, centerFrequency)\r\n    const semitonesFromCenter = Math.floor((centsFromCenterOfScale + 50) / 100)\r\n    const semitoneNearestCenter = centerNote + semitonesFromCenter\r\n    const centsFromCenterOfScreen =\r\n      centsFromCenterOfScale - semitonesFromCenter * 100\r\n\r\n    ctx.textAlign = 'center'\r\n    ctx.fillStyle = 'gray'\r\n    ctx.strokeStyle = 'gray'\r\n    const numberOfTicksOnEachSide = Math.ceil(centsOnScale / 200) + 1\r\n    for (let i = -numberOfTicksOnEachSide; i <= numberOfTicksOnEachSide; i++) {\r\n      // Semitone Tick\r\n      ctx.lineWidth = needleWidth / 2\r\n      const x = halfWidth - (centsFromCenterOfScreen + 100 * i) * pixelsPerCent\r\n      ctx.beginPath()\r\n      ctx.moveTo(x, height * 0.67)\r\n      ctx.lineTo(x, height)\r\n      ctx.closePath()\r\n      ctx.stroke()\r\n\r\n      // Semitone label\r\n      const name = notes[semitoneNearestCenter - i]\r\n      const t =\r\n        i === 0 ? easeExpInOut(1 - Math.abs(centsFromCenterOfScreen / 50)) : 0\r\n      const fontScale = lerp(t, 0.1, 0.2) * height\r\n      const y = lerp(t, 0.64, 0.44) * height\r\n      ctx.font = `bold ${fontScale}px sans-serif`\r\n      ctx.fillText(name, x, y)\r\n\r\n      // 10 cent division ticks\r\n      if (cssPixelsPerCent > 1.75) {\r\n        ctx.lineWidth = needleWidth / 3\r\n        if (i !== -numberOfTicksOnEachSide) {\r\n          for (let j = 1; j <= 9; j++) {\r\n            const xt = x + j * 10 * pixelsPerCent\r\n            ctx.beginPath()\r\n            ctx.moveTo(xt, height * 0.9)\r\n            ctx.lineTo(xt, height)\r\n            ctx.closePath()\r\n            ctx.stroke()\r\n          }\r\n        }\r\n      }\r\n    }\r\n\r\n    // numeric frequency label\r\n    const labelSize = Math.min(0.26 * height, 0.1 * width)\r\n    const margin = 0.25 * labelSize\r\n    ctx.font = `bold ${labelSize}px sans-serif`\r\n    ctx.fillStyle = 'black'\r\n    ctx.textAlign = 'left'\r\n    ctx.textBaseline = 'top'\r\n    ctx.fillText(frequency.toFixed(1), margin, margin)\r\n  }\r\n}\r\n\r\nexport default withContentRect('bounds')(FrequencySlider)\r\n","function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React from \"react\";\n\nvar _ref =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M276.02 303.939h.453l-.453-8.959C276.02 171.362 376.382 71 500 71s223.98 100.362 223.98 223.98l-.453 8.959h.453v250.857h-.906c-4.507 119.543-102.955 215.02-223.527 215.02-120.572 0-219.02-95.477-223.527-215.02V303.939z\",\n  fill: \"#fff\"\n});\n\nvar _ref2 =\n/*#__PURE__*/\nReact.createElement(\"path\", {\n  d: \"M764.264 545.494a27.257 27.257 0 0 1-.315-4.137c0-14.93 12.121-27.051 27.051-27.051 14.93 0 27.051 12.121 27.051 27.051v.514C817.773 717.172 675.366 859.408 500 859.408c-175.537 0-318.051-142.514-318.051-318.051l.001-.175c.094-14.849 12.178-26.876 27.05-26.876 14.93 0 27.051 12.121 27.051 27.051 0 1.406-.108 2.788-.315 4.137C237.951 689.46 355.514 805.653 500 805.653c144.487 0 262.05-116.194 264.264-260.159zM410.348 895.125h179.304c14.93 0 27.051 12.121 27.051 27.051 0 14.929-12.121 27.051-27.051 27.051H410.348c-14.93 0-27.051-12.122-27.051-27.051 0-14.93 12.121-27.051 27.051-27.051z\",\n  fill: \"#fff\"\n});\n\nvar SvgComponent = function SvgComponent(props) {\n  return React.createElement(\"svg\", _extends({\n    viewBox: \"0 0 1000 1000\",\n    fillRule: \"evenodd\",\n    clipRule: \"evenodd\",\n    strokeLinejoin: \"round\",\n    strokeMiterlimit: 1.414\n  }, props), _ref, _ref2);\n};\n\nexport default __webpack_public_path__ + \"static/media/mic.246dec23.svg\";\nexport { SvgComponent as ReactComponent };","import React, { PureComponent } from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport Flex from './Flex'\r\nimport ControlledDisplay from './ControlledDisplay'\r\nimport FrequencySlider from './FrequencySlider'\r\nimport { createMicAnalyser } from '../audio'\r\n\r\nimport { ReactComponent as MicIcon } from '../icon/mic.svg'\r\n\r\nconst MicIconWrapper = ({ on, ...rest }) => <MicIcon {...rest} />\r\nconst Mic = styled(MicIconWrapper)`\r\n  height: 100%;\r\n  path {\r\n    fill: ${({ on }) => (on ? 'white' : 'black')};\r\n  }\r\n`\r\n\r\nconst Error = styled(Flex)`\r\n  align-items: center;\r\n  justify-content: center;\r\n`\r\n\r\nexport default class Tuner extends PureComponent {\r\n  rafId = null\r\n  analyser = null\r\n  state = {\r\n    tuning: false,\r\n    frequency: undefined,\r\n    error: undefined,\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    const { analyser } = this\r\n    const { tuning } = this.state\r\n\r\n    if (tuning !== prevState.tuning) {\r\n      // If this is the first time to enable the tuner, we need\r\n      // to create the analyser. This is an async operation, so\r\n      // when it's done we'll go ahead and start it.\r\n      if (!analyser) {\r\n        createMicAnalyser()\r\n          .then(analyser => {\r\n            this.analyser = analyser\r\n            this.startTuner()\r\n          })\r\n          .catch(error => {\r\n            console.error(error)\r\n            this.setState({ error })\r\n          })\r\n      } else if (tuning) {\r\n        this.startTuner()\r\n      } else {\r\n        this.stopTuner()\r\n      }\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { analyser, rafId } = this\r\n    if (analyser) analyser.destroy()\r\n    if (rafId) cancelAnimationFrame(rafId)\r\n  }\r\n\r\n  startTuner() {\r\n    this.analyser.start()\r\n    this.rafId = requestAnimationFrame(this.sample)\r\n  }\r\n\r\n  stopTuner() {\r\n    this.analyser.stop()\r\n    cancelAnimationFrame(this.rafId)\r\n  }\r\n\r\n  toggleTuner = () => {\r\n    this.setState(prevState => ({\r\n      tuning: !prevState.tuning,\r\n    }))\r\n  }\r\n\r\n  sample = () => {\r\n    const { analyser, sample } = this\r\n\r\n    const frequency = analyser.samplePitch()\r\n    // Don't change the frequency back to undefined;\r\n    // leave the display at the last seen frequency\r\n    if (frequency !== undefined) {\r\n      this.setState({ frequency })\r\n    }\r\n\r\n    this.rafId = requestAnimationFrame(sample)\r\n  }\r\n\r\n  render() {\r\n    const { error, tuning, frequency } = this.state\r\n    return error ? (\r\n      <Error>error: no microphone</Error>\r\n    ) : (\r\n      <ControlledDisplay\r\n        display={<FrequencySlider frequency={frequency} pixelsPerCent={3} />}\r\n        controls={<Mic on={tuning} onClick={this.toggleTuner} />}\r\n      />\r\n    )\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nconst TWO_PI = Math.PI * 2\r\nconst sinPath = amplitude => `\r\nM ${-TWO_PI} 0\r\nQ ${-Math.PI * 1.5} ${amplitude} ${-Math.PI} 0\r\nT 0 0\r\nT ${Math.PI} 0\r\nT ${TWO_PI} 0\r\n`\r\n\r\nconst Graphic = styled.svg`\r\n  height: 100%;\r\n  stroke: ${({ on }) => (on ? 'white' : 'black')};\r\n  fill: transparent;\r\n  stroke-width: 0.6;\r\n`\r\n\r\nconst WaveForm = styled.path.attrs({\r\n  d: sinPath(3),\r\n})`\r\n  transition: 0.15s transform, 0.05s stroke-width;\r\n  transform: ${({ on }) => (on ? 'scale(1, 1)' : 'scale(100, 1)')};\r\n  stroke-width: ${({ on }) => (on ? 0.75 : 0.45)};\r\n`\r\n\r\nexport default ({ on, frequency, ...props }) => (\r\n  <Graphic viewBox=\"0 0 10 10\" on={on} frequency={frequency} {...props}>\r\n    <circle cx=\"5\" cy=\"5\" r=\"4.5\" />\r\n    <svg\r\n      x={0.7}\r\n      y={1}\r\n      width={8.6}\r\n      height={8}\r\n      viewBox={`${-1.9 * Math.PI} -1 ${3.8 * Math.PI} 2`}\r\n    >\r\n      <WaveForm on={on} frequency={frequency} />\r\n    </svg>\r\n  </Graphic>\r\n)\r\n","import React, { Component } from 'react'\r\n\r\nimport ControlledDisplay from './ControlledDisplay'\r\nimport FrequencySlider from './FrequencySlider'\r\nimport ToneButton from './ToneButton'\r\nimport { createToneGenerator } from '../audio'\r\n\r\nexport default class ToneGenerator extends Component {\r\n  generator = null\r\n  state = {\r\n    frequency: 440,\r\n    playing: false,\r\n  }\r\n\r\n  componentDidUpdate(prevProps, prevState) {\r\n    let { generator } = this\r\n    const { frequency, playing } = this.state\r\n\r\n    // toggle playing, create generator if necessary\r\n    if (playing !== prevState.playing) {\r\n      if (!generator) {\r\n        generator = createToneGenerator()\r\n        generator.setFrequency(frequency)\r\n        this.generator = generator\r\n      }\r\n\r\n      if (prevState.playing) {\r\n        generator.stop()\r\n      } else {\r\n        generator.start()\r\n      }\r\n    }\r\n\r\n    // update frequency\r\n    if (generator && frequency !== prevState.frequency) {\r\n      generator.setFrequency(frequency)\r\n    }\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    const { generator } = this\r\n    if (generator) {\r\n      generator.destroy()\r\n    }\r\n  }\r\n\r\n  toggleTone = () => {\r\n    this.setState(prevState => ({ playing: !prevState.playing }))\r\n  }\r\n\r\n  setFrequency = frequency => {\r\n    this.setState({ frequency })\r\n  }\r\n\r\n  render() {\r\n    const { playing, frequency } = this.state\r\n    return (\r\n      <ControlledDisplay\r\n        display={\r\n          <FrequencySlider\r\n            frequency={frequency}\r\n            onFrequencyChange={this.setFrequency}\r\n            pixelsPerCent={1.4}\r\n          />\r\n        }\r\n        controls={\r\n          <ToneButton\r\n            on={playing}\r\n            frequency={frequency}\r\n            onClick={this.toggleTone}\r\n          />\r\n        }\r\n      />\r\n    )\r\n  }\r\n}\r\n","import { AudioContext } from './util'\r\n\r\nexport default function create() {\r\n  const audioContext = new AudioContext()\r\n  const oscillator = audioContext.createOscillator()\r\n  oscillator.start()\r\n  oscillator.connect(audioContext.destination)\r\n  audioContext.suspend()\r\n\r\n  return {\r\n    setFrequency: f => (oscillator.frequency.value = f),\r\n    start: () => audioContext.resume(),\r\n    stop: () => audioContext.suspend(),\r\n    destroy: () => audioContext.close(),\r\n  }\r\n}\r\n","import React from 'react'\r\nimport styled from 'styled-components'\r\n\r\nimport { Navigator, Option } from './components/Navigator'\r\nimport Tuner from './components/Tuner'\r\nimport ToneGenerator from './components/ToneGenerator'\r\n\r\nconst Header = styled.header`\r\n  padding: 1em;\r\n`\r\n\r\nconst Title = styled.h1`\r\n  font-weight: normal;\r\n  font-size: 1.5em;\r\n`\r\n\r\nexport default ({ extraOptions }) => (\r\n  <>\r\n    <Header>\r\n      <Title>oh fiddle bits!</Title>\r\n    </Header>\r\n    <Navigator>\r\n      <Option render={() => <Tuner />}>tune</Option>\r\n      <Option render={() => <ToneGenerator />}>tone</Option>\r\n      <Option>beat</Option>\r\n      {extraOptions}\r\n    </Navigator>\r\n  </>\r\n)\r\n","// In production, we register a service worker to serve assets from local cache.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on the \"N+1\" visit to a page, since previously\n// cached resources are updated in the background.\n\n// To learn more about the benefits of this model, read https://goo.gl/KwvDNy.\n// This link also includes instructions on opting out of this behavior.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport default function register() {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebookincubator/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Lets check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://goo.gl/SC7cgQ'\n          )\n        })\n      } else {\n        // Is not local host. Just register service worker\n        registerValidSW(swUrl)\n      }\n    })\n  }\n}\n\nfunction registerValidSW(swUrl) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the old content will have been purged and\n              // the fresh content will have been added to the cache.\n              // It's the perfect time to display a \"New content is\n              // available; please refresh.\" message in your web app.\n              console.log('New content is available; please refresh.')\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker(swUrl) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport './index.css'\r\nimport App from './App'\r\nimport { Option } from './components/Navigator'\r\nimport registerServiceWorker from './registerServiceWorker'\r\n\r\nif (process.env.NODE_ENV === 'production') {\r\n  ReactDOM.render(<App />, document.getElementById('root'))\r\n  registerServiceWorker()\r\n} else {\r\n  import('./test/components/TestAnalyser').then(({ default: TestAnalyser }) => {\r\n    ReactDOM.render(\r\n      <App\r\n        extraOptions={[\r\n          <Option key=\"test\" render={() => <TestAnalyser />}>\r\n            test\r\n          </Option>,\r\n        ]}\r\n      />,\r\n      document.getElementById('root'),\r\n    )\r\n  })\r\n}\r\n"],"sourceRoot":""}